var SSIE;(()=>{"use strict";var t={913:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.constants=e.stateInitial=void 0;const a=149597870.691;e.stateInitial={JTepoch:2440400.5,deltaT:0,pointMasses:[{name:"Sun",mu:.0002959122082855911,r:[.004502510267338,.00076707537577,.000266057691688],v:[-3.5174580914658e-7,51776285849263e-19,222910271134566e-20]},{name:"Mercury",mu:4912500194824559e-26,r:[.361762718034225,-.090781972621708,-.085714974035992],v:[.003367493963235,.024894520558457,.012946300394857]},{name:"Venus",mu:7.243452332680141e-10,r:[.612751942019959,-.348365370464534,-.195278287180387],v:[.010952068440445,.015617684258434,.006331105708522]},{name:"Earth",mu:8.887692446750799e-10,r:[.120527235324218,-.925814239715091,-.401527016250346],v:[.016803964781901,.001750343790512,.000759242530584]},{name:"Moon",mu:1093189462305851e-26,r:[.119719057983365,-.92780886970539,-.402614278932212],v:[.017405049598487,.001582898323347,.000673680390844]},{name:"Mars",mu:9549548829827684e-26,r:[-.110186075103234,-1.3275994509038,-.605889141362437],v:[.014481653062556,.000242463081796,-.000281520722303]},{name:"Jupiter",mu:2.825345825239843e-7,r:[-5.379706767375737,-.830481311638832,-.224829061010041],v:[.00109201265824,-.006518116477461,-.00282078303183]},{name:"Saturn",mu:8.45970599341836e-8,r:[7.894390671857393,4.596478065058391,1.558695851205089],v:[-.003217556521666,.004335810340742,.001928646314749]},{name:"Uranus",mu:1.292026564974666e-8,r:[-18.2654035453251,-1.161956689138341,-.250105437331929],v:[.000221190755635,-.00376247477209,-.001651014943529]},{name:"Neptune",mu:1.524357347892686e-8,r:[-16.0550375057902,-23.942192276077712,-9.400157386764722],v:[.002642770077387,-.001498312385224,-.000679041984533]},{name:"Pluto",mu:2175096464904175e-27,r:[-30.48331297016226,-.872409037876984,8.911571443040605],v:[.000322207385086,-.003143576124413,-.001077949572518]}],libration:{phi:.005128132058714363,phi1:.0001165507165777481,theta:.3823932005230066,theta1:146191282385817e-19,psi:1.294168056057082,psi1:.2298367282420818}},e.constants={au:a,c:173.14463272053635,c2:Math.pow(173.14463272053635,2),k:.01720209895,aMoon:1738/a,aEarth:6378.1363/a,inertiaMoon:{A:52699461151199764e-27,B:5271148538989411e-26,C:5273275829933041e-26,betaL:.00063168677346798,gammaL:.0002280221835939711},phase:.040700012,love:.29,Je:[.00108262545,-253241e-11,-1616e-9],Jm:[.0002032156846495257,8459702697459457e-21,-970441383657e-17,7.422160838405289e-7,-137675313509699e-19],CSnm:[[2,2,2230351309e-14,0],[3,1,2848074119559286e-20,5891555155531864e-21],[3,2,484494206197706e-20,168447439627839e-20],[3,3,1675617813411457e-21,-2.474271437980576e-7],[4,1,-5704869731973321e-21,1578920278924572e-21],[4,2,-1591227179297743e-21,-1515391579673172e-21],[4,3,-8.067888159677821e-8,-8.034926662743107e-7],[4,4,-1.269215861221604e-7,8.296425775407522e-8]]}},646:(t,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Figure=void 0;const s=a(551),o=a(923),r=a(423),n=a(913),i=a(244),c=a(496),h=a(225);e.Figure=class{static accBody(t,e,a,n,i){const c=o.MathUtils.norm(t),h=t[2]/o.MathUtils.norm(t),M=Math.asin(h),l=Math.atan2(t[1],t[0]),u=Math.cos(M),d=n.length,p=i.length;let m=[0,0,0],v=[0,0,0],f=[0,0,0];for(let t=0;t<d;t++){const a=t+2,s=r.Polynomials.legendreValue(a,h),i=r.Polynomials.legendreDeriv(a,h);m=o.MathUtils.linComb([1,n[t]*Math.pow(e/c,a)],[m,[(a+1)*s,0,-u*i]])}m=o.MathUtils.vecMul(m,-a/(c*c));for(let t=0;t<p;t++){const a=i[t][0],s=i[t][1],n=i[t][2],M=i[t][3],d=Math.cos(s*l),p=Math.sin(s*l),m=Math.pow(-1,s)*r.Polynomials.legendreAssoc(a,s,h),f=Math.pow(-1,s)*r.Polynomials.legendreAssocd(a,s,h);v=o.MathUtils.linComb([1,Math.pow(e/c,a)],[v,[-(a+1)*m*(n*d+M*p),s/u*m*(-n*p+M*d),u*f*(n*d+M*p)]])}return v=o.MathUtils.vecMul(v,-a/(c*c)),f=o.MathUtils.linComb([1,1],[m,v]),s.Rotations.rotateCart3(s.Rotations.rotateCart2(f,M),-l)}static accOblateness(t,e,a,s,r){const M=t.r,l=e.r,u=a.r,d=t.mu,p=e.mu,m=a.mu,v=n.constants.Je,f=n.constants.Jm,w=n.constants.CSnm,b=s.phi,U=s.theta,g=s.psi,y=o.MathUtils.vecDiff(l,u),P=i.Frames.coordJ2000Body(y,b,U,g),C=this.accBody(P,n.constants.aMoon,1,f,w),I=o.MathUtils.cross(P,C),T=o.MathUtils.vecMul(C,-m),O=i.Frames.coordBodyJ2000(T,b,U,g),R=o.MathUtils.vecMul(C,p),J=i.Frames.coordBodyJ2000(R,b,U,g),_=o.MathUtils.vecDiff(M,u),S=i.Frames.coordJ2000Body(_,b,U,g),F=this.accBody(S,n.constants.aMoon,1,f,w),j=o.MathUtils.cross(S,F),D=o.MathUtils.vecMul(F,-m),A=i.Frames.coordJ2000Body(D,b,U,g),B=o.MathUtils.vecMul(F,d),q=i.Frames.coordJ2000Body(B,b,U,g),L=o.MathUtils.linComb([p,d],[I,j]);c.Libration.librationMoon(s,L);const E=o.MathUtils.vecDiff(u,l),N=o.MathUtils.vecDiff(M,l),z=i.Frames.coordJ2000Mod(E,r),x=i.Frames.coordJ2000Mod(N,r),G=this.accBody(z,n.constants.aEarth,1,v,[]),V=this.accBody(x,n.constants.aEarth,1,v,[]),K=o.MathUtils.vecMul(G,-p),k=o.MathUtils.vecMul(V,-p),H=o.MathUtils.vecMul(G,m),Q=o.MathUtils.vecMul(V,d),{accMeTodTides:W,accEmTodTides:X}=h.Tides.accTides(z,p,m),Y=W,Z=X,$=i.Frames.coordModJ2000(K,r),tt=i.Frames.coordModJ2000(k,r),et=i.Frames.coordModJ2000(H,r),at=i.Frames.coordModJ2000(Q,r),st=i.Frames.coordModJ2000(Y,r),ot=i.Frames.coordModJ2000(Z,r);return[o.MathUtils.vecSum(A,tt),o.MathUtils.linComb([1,1,1,1],[at,O,et,ot]),o.MathUtils.linComb([1,1,1,1],[q,J,$,st])]}}},244:(t,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Frames=void 0;const s=a(551);e.Frames=class{static coordJ2000Mod(t,e){const a=(e-2451545)/36525,o=a*a,r=o*a,n=.6406161388*a+.00030407777777*o+50563888888e-16*r,i=.5567530277*a-.00011851388888*o-11620277777e-15*r,c=.6406161388*a+83855555555e-15*o+49994444444e-16*r;return s.Rotations.rotateCart3d(s.Rotations.rotateCart2d(s.Rotations.rotateCart3d(t,-c),i),-n)}static coordModJ2000(t,e){const a=(e-2451545)/36525,o=a*a,r=o*a,n=.6406161388*a+.00030407777777*o+50563888888e-16*r,i=.5567530277*a-.00011851388888*o-11620277777e-15*r,c=.6406161388*a+83855555555e-15*o+49994444444e-16*r;return s.Rotations.rotateCart3d(s.Rotations.rotateCart2d(s.Rotations.rotateCart3d(t,n),-i),c)}static coordJ2000Body(t,e,a,o){return s.Rotations.rotateCart3(s.Rotations.rotateCart1(s.Rotations.rotateCart3(t,e),a),o)}static coordBodyJ2000(t,e,a,o){return s.Rotations.rotateCart3(s.Rotations.rotateCart1(s.Rotations.rotateCart3(t,-o),-a),-e)}}},342:(t,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Integration=e.IntegrationMethod=void 0;const s=a(923);var o;(o=e.IntegrationMethod||(e.IntegrationMethod={}))[o.INTEGRATION_RK4=0]="INTEGRATION_RK4",o[o.INTEGRATION_ADAMS8=1]="INTEGRATION_ADAMS8",e.Integration=class{constructor(){}initialize(t,e,a){this.state=t,this.integrationMethod=e,this.stepSize=a}stateToDof(){const t=[],e=(this.state.libration,this.state.pointMasses);t.push(this.state.libration.phi),t.push(this.state.libration.phi1),t.push(this.state.libration.theta),t.push(this.state.libration.theta1),t.push(this.state.libration.psi),t.push(this.state.libration.psi1);for(let a=0;a<e.length;a++){const{r:s,v:o,mu:r}=e[a];t.push(s[0]),t.push(s[1]),t.push(s[2]),t.push(o[0]),t.push(o[1]),t.push(o[2])}return t}dofToState(t,e){const a={phi:t[0],phi1:t[1],theta:t[2],theta1:t[3],psi:t[4],psi1:t[5]},s=this.state.pointMasses,o=s.length,r=[];for(let e=0;e<o;e++){const a=6+6*e,o=s[e].name,n=s[e].mu,i=[t[a],t[a+1],t[a+2]],c=[t[a+3],t[a+4],t[a+5]];r.push({name:o,mu:n,r:i,v:c})}return{JTepoch:this.state.JTepoch,deltaT:e,pointMasses:r,libration:a}}static runge4(t,e,a,o,r){const n=t(e,a,r),i=t(e+o/2,s.MathUtils.linComb([1,o/2],[a,n]),r),c=t(e+o/2,s.MathUtils.linComb([1,o/2],[a,i]),r),h=t(e+o,s.MathUtils.linComb([1,o],[a,c]),r);return{yOut:s.MathUtils.linComb([1,o/6,o/3,o/3,o/6],[a,n,i,c,h]),tOut:e+o}}adams8(t,e,a,s,o,r){const n=[434241*o/120960,1152169*-o/120960,2183877*o/120960,2664477*-o/120960,2102243*o/120960,1041723*-o/120960,295767*o/120960,36799*-o/120960],i=[36799*o/120960,139849*o/120960,121797*-o/120960,123133*o/120960,88547*-o/120960,41499*o/120960,11351*-o/120960,1375*o/120960],c=a.length;let h=a.slice(),M=a.slice();for(let t=0;t<n.length;t++){const e=n[t];for(let a=0;a<c;a++)h[a]+=e*s[t][a]}let l=t(e+o,h,r);const u=[l].concat(s).slice(0,8);for(let t=0;t<i.length;t++){const e=i[t];for(let a=0;a<c;a++)M[a]+=e*u[t][a]}return l=t(e+o,M,r),{tOut:e+o,yOut:M,Fout:[l].concat(s).slice(0,8)}}setIntegrationState(t){this.state=t}getIntegrationState(){return this.state}setIntegrationMethod(t){this.integrationMethod=t}getIntegrationMethod(){return this.integrationMethod}setStepSize(t){this.stepSize=t}getStepSize(){return this.stepSize}}},496:(t,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Libration=void 0;const s=a(913);e.Libration=class{static librationMoon(t,e){const a=s.constants.inertiaMoon,{phi:o,theta:r,psi:n,phi1:i,theta1:c,psi1:h}=t,M=i*Math.sin(r)*Math.sin(n)+c*Math.cos(n),l=i*Math.sin(r)*Math.cos(n)-c*Math.sin(n),u=i*Math.cos(r)+h,d=l*u*(a.gammaL-a.betaL)/(1-a.betaL*a.gammaL)+e[0]/a.A,p=u*M*a.betaL+e[1]/a.B,m=-M*l*a.gammaL+e[2]/a.C,v=(d*Math.sin(n)+p*Math.cos(n)+c*(h-i*Math.cos(r)))/Math.sin(r);return{phi2:v,theta2:d*Math.cos(n)-p*Math.sin(n)-i*h*Math.sin(r),psi2:m-v*Math.cos(r)+i*c*Math.sin(r)}}}},923:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MathUtils=void 0,e.MathUtils=class{static deg2Rad(t){return 2*Math.PI*t/360}static rad2Deg(t){return 180*t/Math.PI}static sind(t){return Math.sin(t*Math.PI/180)}static cosd(t){return Math.cos(t*Math.PI/180)}static tand(t){return Math.tan(this.deg2Rad(t))}static asind(t){return this.rad2Deg(Math.asin(t))}static acosd(t){return this.rad2Deg(Math.acos(t))}static atand(t){return this.rad2Deg(Math.atan(t))}static atan2d(t,e){return this.rad2Deg(Math.atan2(t,e))}static cross(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}static dot(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}static norm(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])}static vecSum(t,e){return[t[0]+e[0],t[1]+e[1],t[2]+e[2]]}static linComb(t,e){const a=e[0].length;let s=new Array(a).fill(0);for(let o=0;o<t.length;o++){const r=e[o];for(let e=0;e<a;e++)s[e]+=t[o]*r[e]}return s}static vecDiff(t,e){return[t[0]-e[0],t[1]-e[1],t[2]-e[2]]}static vecMul(t,e){return[t[0]*e,t[1]*e,t[2]*e]}}},954:(t,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PointMass=void 0;const s=a(923),o=a(913);e.PointMass=class{static barycenter(t,e){const a=t.length,r=o.constants.c2,n=[];let i=0;for(let o=0;o<a;o++){const c=t[o];if(e){let e=Math.pow(s.MathUtils.norm(c.v),2);for(let r=0;r<a;r++){if(r==o)continue;const a=t[r];e-=a.mu/s.MathUtils.norm(s.MathUtils.vecDiff(c.r,a.r))}e=1-.5*e/r,n.push(c.mu*e)}else n.push(c.mu);i+=n[n.length-1]}let c=[0,0,0],h=[0,0,0];for(let e=0;e<a;e++){const a=t[e];c=s.MathUtils.linComb([1,n[e]],[c,a.r]),h=s.MathUtils.linComb([1,n[e]],[h,a.v])}return c=s.MathUtils.vecMul(c,1/i),h=s.MathUtils.vecMul(h,1/i),{r:c,v:h}}static accPointMass(t,e){const a=t.length,r=o.constants.c2,n=[],i=[];for(let e=0;e<a;e++){const o=t[e],r=[],c=[];for(let e=0;e<a;e++){const a=t[e],n=s.MathUtils.norm(s.MathUtils.vecDiff(o.r,a.r));r.push(n),c.push(Math.pow(n,3))}n.push(r),i.push(c)}const c=[],h=[],M=[];for(let e=0;e<a;e++){const o=t[e];let r=[0,0,0];for(let n=0;n<a;n++){if(n==e)continue;const a=t[n],c=s.MathUtils.vecDiff(a.r,o.r),h=s.MathUtils.vecMul(c,a.mu/i[n][e]);r=s.MathUtils.vecSum(r,h)}c.push(r)}if(!e)return c;for(let o=0;o<a;o++){const M=t[o];let l=[0,0,0];if(e){for(let e=0;e<a;e++){if(e==o)continue;const h=t[e],u=s.MathUtils.vecDiff(h.r,M.r),d=s.MathUtils.vecDiff(h.v,M.v),p=s.MathUtils.vecMul(u,h.mu/i[e][o]);let m=0;for(let s=0;s<a;s++){const a=t[s];o!=s&&(m-=4*a.mu/n[o][s]),e!=s&&(m-=a.mu/n[e][s])}const v=n[e][o],f=i[e][o];m+=Math.pow(s.MathUtils.norm(M.v),2)+2*Math.pow(s.MathUtils.norm(h.v),2)-4*s.MathUtils.dot(M.v,h.v)-1.5*Math.pow(s.MathUtils.dot(u,h.v)/v,2)+.5*s.MathUtils.dot(u,c[e]),l=s.MathUtils.linComb([1,m/r,h.mu/r/f*s.MathUtils.dot(u,s.MathUtils.linComb([4,-3],[M.v,h.v])),3.5/r*h.mu/v],[l,p,d,c[e]])}h.push(l)}}for(let t=0;t<a;t++)M.push(s.MathUtils.vecSum(c[t],h[t]));return M}}},423:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Polynomials=void 0,e.Polynomials=class{static legendreAssoc(t,e,a){switch(t){case 1:switch(e){case 0:return a;case 1:return-Math.sqrt(1-Math.pow(a,2))}case 2:switch(e){case 0:return.5*(3*Math.pow(a,2)-1);case 1:return-3*a*Math.sqrt(1-Math.pow(a,2));case 2:return 3*(1-Math.pow(a,2))}case 3:switch(e){case 0:return.5*(5*Math.pow(a,3)-3*a);case 1:return 1.5*(1-5*Math.pow(a,2))*Math.sqrt(1-Math.pow(a,2));case 2:return 15*a*(1-Math.pow(a,2));case 3:return-15*Math.pow(1-Math.pow(a,2),1.5)}case 4:switch(e){case 0:return.125*(35*Math.pow(a,4)-30*Math.pow(a,2)+3);case 1:return-2.5*(7*Math.pow(a,3)-3*a)*Math.sqrt(1-Math.pow(a,2));case 2:return 7.5*(7*Math.pow(a,2)-1)*(1-Math.pow(a,2));case 3:return-105*a*Math.pow(1-Math.pow(a,2),1.5);case 4:return 105*Math.pow(1-Math.pow(a,2),2)}}return 0}static legendreAssocd(t,e,a){switch(t){case 1:switch(e){case 0:return 1;case 1:return a/Math.sqrt(1-Math.pow(a,2))}case 2:switch(e){case 0:return 3*a;case 1:return-3*Math.sqrt(1-Math.pow(a,2))+3*Math.pow(a,2)/Math.sqrt(1-Math.pow(a,2));case 2:return-6*a}case 3:switch(e){case 0:return 7.5*Math.pow(a,2)-1.5;case 1:return(7.5*Math.pow(a,2)-1.5)*a/Math.sqrt(1-Math.pow(a,2))-15*a*Math.sqrt(1-Math.pow(a,2));case 2:return 15-45*Math.pow(a,2);case 3:return 45*a*Math.sqrt(1-Math.pow(a,2))}case 4:switch(e){case 0:return 17.5*Math.pow(a,3)-7.5*a;case 1:return(17.5*Math.pow(a,4)-7.5*Math.pow(a,2))/Math.sqrt(1-Math.pow(a,2))-(52.5*a*a-7.5)*Math.sqrt(1-a*a);case 2:return 120*a-210*Math.pow(a,3);case 3:return-105*Math.pow(1-Math.pow(a,2),1.5)+315*Math.pow(a,2)*Math.sqrt(1-Math.pow(a,2));case 4:return-420*(a-Math.pow(a,3))}}return 0}static legendreDeriv(t,e){switch(t){case 0:return 0;case 1:return 1;case 2:return 3*e;case 3:return 7.5*Math.pow(e,2)-1.5;case 4:return 17.5*Math.pow(e,3)-7.5*e;case 5:return 39.375*Math.pow(e,4)-26.25*Math.pow(e,2)+1.875;case 6:return 86.625*Math.pow(e,5)-78.75*Math.pow(e,3)+13.125*e}return 0}static legendreValue(t,e){switch(t){case 0:return 1;case 1:return e;case 2:return.5*(3*Math.pow(e,2)-1);case 3:return.5*(5*Math.pow(e,3)-3*e);case 4:return.125*(35*Math.pow(e,4)-30*Math.pow(e,2)+3);case 5:return.125*(63*Math.pow(e,5)-70*Math.pow(e,3)+15*e);case 6:return.0625*(231*Math.pow(e,6)-315*Math.pow(e,4)+105*Math.pow(e,2)-5)}return 0}}},551:(t,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Rotations=void 0;const s=a(923);e.Rotations=class{static rotateCart1d(t,e){const a=s.MathUtils.cosd(e),o=s.MathUtils.sind(e);return[t[0],a*t[1]+o*t[2],-o*t[1]+a*t[2]]}static rotateCart2d(t,e){const a=s.MathUtils.cosd(e),o=s.MathUtils.sind(e);return[a*t[0]-o*t[2],t[1],o*t[0]+a*t[2]]}static rotateCart3d(t,e){const a=s.MathUtils.cosd(e),o=s.MathUtils.sind(e);return[a*t[0]+o*t[1],-o*t[0]+a*t[1],t[2]]}static rotateCart1(t,e){return[t[0],Math.cos(e)*t[1]+Math.sin(e)*t[2],-Math.sin(e)*t[1]+Math.cos(e)*t[2]]}static rotateCart2(t,e){return[Math.cos(e)*t[0]-Math.sin(e)*t[2],t[1],Math.sin(e)*t[0]+Math.cos(e)*t[2]]}static rotateCart3(t,e){return[Math.cos(e)*t[0]+Math.sin(e)*t[1],-Math.sin(e)*t[0]+Math.cos(e)*t[1],t[2]]}}},225:(t,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Tides=void 0;const s=a(923),o=a(913);e.Tides=class{static accTides(t,e,a){const r=s.MathUtils.norm(t),n=s.MathUtils.vecMul([t[0]+o.constants.phase*t[1],t[1]-o.constants.phase*t[0],t[2]],-3*o.constants.love*a*(1+a/e)*(Math.pow(o.constants.aEarth,5)/Math.pow(r,8)));return{accMeTodTides:n,accEmTodTides:s.MathUtils.vecMul(n,-a/e)}}}}},e={};function a(s){var o=e[s];if(void 0!==o)return o.exports;var r=e[s]={exports:{}};return t[s](r,r.exports,a),r.exports}var s={};(()=>{var t=s;Object.defineProperty(t,"__esModule",{value:!0}),t.constants=t.stateInitial=t.Figure=t.Tides=t.Integration=t.PointMass=t.Libration=t.Polynomials=t.Rotations=t.MathUtils=void 0;const e=a(923);Object.defineProperty(t,"MathUtils",{enumerable:!0,get:function(){return e.MathUtils}});const o=a(551);Object.defineProperty(t,"Rotations",{enumerable:!0,get:function(){return o.Rotations}});const r=a(423);Object.defineProperty(t,"Polynomials",{enumerable:!0,get:function(){return r.Polynomials}});const n=a(496);Object.defineProperty(t,"Libration",{enumerable:!0,get:function(){return n.Libration}});const i=a(342);Object.defineProperty(t,"Integration",{enumerable:!0,get:function(){return i.Integration}});const c=a(225);Object.defineProperty(t,"Tides",{enumerable:!0,get:function(){return c.Tides}});const h=a(954);Object.defineProperty(t,"PointMass",{enumerable:!0,get:function(){return h.PointMass}});const M=a(646);Object.defineProperty(t,"Figure",{enumerable:!0,get:function(){return M.Figure}});const l=a(913);Object.defineProperty(t,"stateInitial",{enumerable:!0,get:function(){return l.stateInitial}}),Object.defineProperty(t,"constants",{enumerable:!0,get:function(){return l.constants}})})(),SSIE=s})();