var SSIE;(()=>{"use strict";var t={913:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.constants=e.stateInitial=void 0;const o=149597870.691;e.stateInitial={JTepoch:2440400.5,deltaT:0,pointMasses:[{name:"Sun",mu:.0002959122082855911,r:[.004502510267338,.00076707537577,.000266057691688],v:[-3.5174580914658e-7,51776285849263e-19,222910271134566e-20]},{name:"Mercury",mu:4912500194824559e-26,r:[.361762718034225,-.090781972621708,-.085714974035992],v:[.003367493963235,.024894520558457,.012946300394857]},{name:"Venus",mu:7.243452332680141e-10,r:[.612751942019959,-.348365370464534,-.195278287180387],v:[.010952068440445,.015617684258434,.006331105708522]},{name:"Earth",mu:8.887692446750799e-10,r:[.120527235324218,-.925814239715091,-.401527016250346],v:[.016803964781901,.001750343790512,.000759242530584]},{name:"Moon",mu:1093189462305851e-26,r:[.119719057983365,-.92780886970539,-.402614278932212],v:[.017405049598487,.001582898323347,.000673680390844]},{name:"Mars",mu:9549548829827684e-26,r:[-.110186075103234,-1.3275994509038,-.605889141362437],v:[.014481653062556,.000242463081796,-.000281520722303]},{name:"Jupiter",mu:2.825345825239843e-7,r:[-5.379706767375737,-.830481311638832,-.224829061010041],v:[.00109201265824,-.006518116477461,-.00282078303183]},{name:"Saturn",mu:8.45970599341836e-8,r:[7.894390671857393,4.596478065058391,1.558695851205089],v:[-.003217556521666,.004335810340742,.001928646314749]},{name:"Uranus",mu:1.292026564974666e-8,r:[-18.2654035453251,-1.161956689138341,-.250105437331929],v:[.000221190755635,-.00376247477209,-.001651014943529]},{name:"Neptune",mu:1.524357347892686e-8,r:[-16.0550375057902,-23.942192276077712,-9.400157386764722],v:[.002642770077387,-.001498312385224,-.000679041984533]},{name:"Pluto",mu:2175096464904175e-27,r:[-30.48331297016226,-.872409037876984,8.911571443040605],v:[.000322207385086,-.003143576124413,-.001077949572518]}],libration:{phi:.005128132058714363,phi1:.0001165507165777481,theta:.3823932005230066,theta1:146191282385817e-19,psi:1.294168056057082,psi1:.2298367282420818}},e.constants={au:o,c:173.14463272053635,c2:Math.pow(173.14463272053635,2),k:.01720209895,aMoon:1738/o,aEarth:6378.1363/o,inertiaMoon:{A:52699461151199764e-27,B:5271148538989411e-26,C:5273275829933041e-26,betaL:.00063168677346798,gammaL:.0002280221835939711},phase:.040700012,love:.29,Je:[.00108262545,-253241e-11,-1616e-9],Jm:[.0002032156846495257,8459702697459457e-21,-970441383657e-17,7.422160838405289e-7,-137675313509699e-19],CSnm:[[2,2,2230351309e-14,0],[3,1,2848074119559286e-20,5891555155531864e-21],[3,2,484494206197706e-20,168447439627839e-20],[3,3,1675617813411457e-21,-2.474271437980576e-7],[4,1,-5704869731973321e-21,1578920278924572e-21],[4,2,-1591227179297743e-21,-1515391579673172e-21],[4,3,-8.067888159677821e-8,-8.034926662743107e-7],[4,4,-1.269215861221604e-7,8.296425775407522e-8]]}},646:(t,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Figure=void 0;const a=o(551),s=o(923),r=o(423),n=o(913),i=o(244),c=o(496),h=o(225),l=o(482);e.Figure=class{static accBody(t,e,o,n,i){const c=s.MathUtils.norm(t),h=t[2]/s.MathUtils.norm(t),l=Math.asin(h),M=Math.atan2(t[1],t[0]),u=Math.cos(l),d=n.length,p=i.length;let m=[0,0,0],v=[0,0,0],g=[0,0,0];for(let t=0;t<d;t++){const o=t+2,a=r.Polynomials.legendreValue(o,h),i=r.Polynomials.legendreDeriv(o,h);m=s.MathUtils.linComb([1,n[t]*Math.pow(e/c,o)],[m,[(o+1)*a,0,-u*i]])}m=s.MathUtils.vecMul(m,-o/(c*c));for(let t=0;t<p;t++){const o=i[t][0],a=i[t][1],n=i[t][2],l=i[t][3],d=Math.cos(a*M),p=Math.sin(a*M),m=Math.pow(-1,a)*r.Polynomials.legendreAssoc(o,a,h),g=Math.pow(-1,a)*r.Polynomials.legendreAssocd(o,a,h);v=s.MathUtils.linComb([1,Math.pow(e/c,o)],[v,[-(o+1)*m*(n*d+l*p),a/u*m*(-n*p+l*d),u*g*(n*d+l*p)]])}return v=s.MathUtils.vecMul(v,-o/(c*c)),g=s.MathUtils.linComb([1,1],[m,v]),a.Rotations.rotateCart3(a.Rotations.rotateCart2(g,l),-M)}static accOblateness(t,e,o,a,r){const M=t.r,u=e.r,d=o.r,p=t.mu,m=e.mu,v=o.mu,g=n.constants.Je,f=n.constants.Jm,w=n.constants.CSnm,b=a.phi,U=a.theta,y=a.psi,C=l.Nutation.nutationTerms((r-2451545)/36525),T=s.MathUtils.vecDiff(u,d),P=i.Frames.coordJ2000Body(T,b,U,y),O=this.accBody(P,n.constants.aMoon,1,f,w),F=s.MathUtils.cross(P,O),R=s.MathUtils.vecMul(O,-v),I=i.Frames.coordBodyJ2000(R,b,U,y),S=s.MathUtils.vecMul(O,m),_=i.Frames.coordBodyJ2000(S,b,U,y),J=s.MathUtils.vecDiff(M,d),A=i.Frames.coordJ2000Body(J,b,U,y),E=this.accBody(A,n.constants.aMoon,1,f,w),j=s.MathUtils.cross(A,E),D=s.MathUtils.vecMul(E,-v),B=i.Frames.coordBodyJ2000(D,b,U,y),N=s.MathUtils.vecMul(E,p),q=i.Frames.coordBodyJ2000(N,b,U,y),L=s.MathUtils.linComb([m,p],[F,j]);c.Libration.librationMoon(a,L);const z=s.MathUtils.vecDiff(d,u),x=s.MathUtils.vecDiff(M,u),G=i.Frames.coordModTod(i.Frames.coordJ2000Mod(z,r),r,C),V=i.Frames.coordModTod(i.Frames.coordJ2000Mod(x,r),r,C),K=this.accBody(G,n.constants.aEarth,1,g,[]),k=this.accBody(V,n.constants.aEarth,1,g,[]),H=s.MathUtils.vecMul(K,-m),Q=s.MathUtils.vecMul(k,-m),W=s.MathUtils.vecMul(K,v),X=s.MathUtils.vecMul(k,p),{accMeTodTides:Y,accEmTodTides:Z}=h.Tides.accTides(G,m,v),$=i.Frames.coordModJ2000(i.Frames.coordTodMod(H,r,C),r),tt=i.Frames.coordModJ2000(i.Frames.coordTodMod(Q,r,C),r),et=i.Frames.coordModJ2000(i.Frames.coordTodMod(W,r,C),r),ot=i.Frames.coordModJ2000(i.Frames.coordTodMod(X,r,C),r),at=i.Frames.coordModJ2000(i.Frames.coordTodMod(Y,r,C),r),st=i.Frames.coordModJ2000(i.Frames.coordTodMod(Z,r,C),r),rt=s.MathUtils.vecSum(B,tt),nt=s.MathUtils.linComb([1,1,1,1],[ot,I,et,st]),it=s.MathUtils.linComb([1,1,1,1],[q,_,$,at]);return console.log("Moon Figure <-> Earth : Earth Acceleration"),console.log(I),console.log("Moon Figure <-> Earth : Moon Acceleration"),console.log(_),console.log("Moon Figure <-> Sun : Sun Acceleration"),console.log(B),console.log("Moon Figure <-> Sun : Moon Acceleration"),console.log(q),console.log("Earth Oblateness <-> Moon : Earth Acceleration"),console.log(et),console.log("Earth Oblateness <-> Moon : Moon Acceleration"),console.log($),console.log("Earth Oblateness <-> Sun : Earth Acceleration"),console.log(ot),console.log("Earth Oblateness <-> Sun : Sun Acceleration"),console.log(tt),console.log("Earth Tides <-> Moon : Earth Acceleration"),console.log(st),console.log("Earth Tides <-> Moon : Moon Acceleration"),console.log(at),[rt,nt,it]}}},244:(t,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Frames=void 0;const a=o(551);e.Frames=class{static coordJ2000Mod(t,e){const o=(e-2451545)/36525,s=o*o,r=s*o,n=.6406161388*o+.00030407777777*s+50563888888e-16*r,i=.5567530277*o-.00011851388888*s-11620277777e-15*r,c=.6406161388*o+83855555555e-15*s+49994444444e-16*r;return a.Rotations.rotateCart3d(a.Rotations.rotateCart2d(a.Rotations.rotateCart3d(t,-c),i),-n)}static coordModJ2000(t,e){const o=(e-2451545)/36525,s=o*o,r=s*o,n=.6406161388*o+.00030407777777*s+50563888888e-16*r,i=.5567530277*o-.00011851388888*s-11620277777e-15*r,c=.6406161388*o+83855555555e-15*s+49994444444e-16*r;return a.Rotations.rotateCart3d(a.Rotations.rotateCart2d(a.Rotations.rotateCart3d(t,n),-i),c)}static coordModTod(t,e,o){return a.Rotations.rotateCart1d(a.Rotations.rotateCart3d(a.Rotations.rotateCart1d(t,o.eps),-o.dpsi),-o.eps-o.deps)}static coordTodMod(t,e,o){return a.Rotations.rotateCart1d(a.Rotations.rotateCart3d(a.Rotations.rotateCart1d(t,o.eps+o.deps),o.dpsi),-o.eps)}static coordJ2000Body(t,e,o,s){return a.Rotations.rotateCart3(a.Rotations.rotateCart1(a.Rotations.rotateCart3(t,e),o),s)}static coordBodyJ2000(t,e,o,s){return a.Rotations.rotateCart3(a.Rotations.rotateCart1(a.Rotations.rotateCart3(t,-s),-o),-e)}}},342:(t,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Integration=e.IntegrationMethod=void 0;const a=o(923);var s;(s=e.IntegrationMethod||(e.IntegrationMethod={}))[s.INTEGRATION_RK4=0]="INTEGRATION_RK4",s[s.INTEGRATION_ADAMS8=1]="INTEGRATION_ADAMS8",e.Integration=class{constructor(){}initialize(t,e,o){this.state=t,this.integrationMethod=e,this.stepSize=o}stateToDof(){const t=[],e=(this.state.libration,this.state.pointMasses);t.push(this.state.libration.phi),t.push(this.state.libration.phi1),t.push(this.state.libration.theta),t.push(this.state.libration.theta1),t.push(this.state.libration.psi),t.push(this.state.libration.psi1);for(let o=0;o<e.length;o++){const{r:a,v:s,mu:r}=e[o];t.push(a[0]),t.push(a[1]),t.push(a[2]),t.push(s[0]),t.push(s[1]),t.push(s[2])}return t}dofToState(t,e){const o={phi:t[0],phi1:t[1],theta:t[2],theta1:t[3],psi:t[4],psi1:t[5]},a=this.state.pointMasses,s=a.length,r=[];for(let e=0;e<s;e++){const o=6+6*e,s=a[e].name,n=a[e].mu,i=[t[o],t[o+1],t[o+2]],c=[t[o+3],t[o+4],t[o+5]];r.push({name:s,mu:n,r:i,v:c})}return{JTepoch:this.state.JTepoch,deltaT:e,pointMasses:r,libration:o}}static runge4(t,e,o,s,r){const n=t(e,o,r),i=t(e+s/2,a.MathUtils.linComb([1,s/2],[o,n]),r),c=t(e+s/2,a.MathUtils.linComb([1,s/2],[o,i]),r),h=t(e+s,a.MathUtils.linComb([1,s],[o,c]),r);return{yOut:a.MathUtils.linComb([1,s/6,s/3,s/3,s/6],[o,n,i,c,h]),tOut:e+s}}adams8(t,e,o,a,s,r){const n=[434241*s/120960,1152169*-s/120960,2183877*s/120960,2664477*-s/120960,2102243*s/120960,1041723*-s/120960,295767*s/120960,36799*-s/120960],i=[36799*s/120960,139849*s/120960,121797*-s/120960,123133*s/120960,88547*-s/120960,41499*s/120960,11351*-s/120960,1375*s/120960],c=o.length;let h=o.slice(),l=o.slice();for(let t=0;t<n.length;t++){const e=n[t];for(let o=0;o<c;o++)h[o]+=e*a[t][o]}let M=t(e+s,h,r);const u=[M].concat(a).slice(0,8);for(let t=0;t<i.length;t++){const e=i[t];for(let o=0;o<c;o++)l[o]+=e*u[t][o]}return M=t(e+s,l,r),{tOut:e+s,yOut:l,Fout:[M].concat(a).slice(0,8)}}setIntegrationState(t){this.state=t}getIntegrationState(){return this.state}setIntegrationMethod(t){this.integrationMethod=t}getIntegrationMethod(){return this.integrationMethod}setStepSize(t){this.stepSize=t}getStepSize(){return this.stepSize}}},496:(t,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Libration=void 0;const a=o(913);e.Libration=class{static librationMoon(t,e){const o=a.constants.inertiaMoon,{phi:s,theta:r,psi:n,phi1:i,theta1:c,psi1:h}=t,l=i*Math.sin(r)*Math.sin(n)+c*Math.cos(n),M=i*Math.sin(r)*Math.cos(n)-c*Math.sin(n),u=i*Math.cos(r)+h,d=M*u*(o.gammaL-o.betaL)/(1-o.betaL*o.gammaL)+e[0]/o.A,p=u*l*o.betaL+e[1]/o.B,m=-l*M*o.gammaL+e[2]/o.C,v=(d*Math.sin(n)+p*Math.cos(n)+c*(h-i*Math.cos(r)))/Math.sin(r);return{phi2:v,theta2:d*Math.cos(n)-p*Math.sin(n)-i*h*Math.sin(r),psi2:m-v*Math.cos(r)+i*c*Math.sin(r)}}}},923:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MathUtils=void 0,e.MathUtils=class{static deg2Rad(t){return 2*Math.PI*t/360}static rad2Deg(t){return 180*t/Math.PI}static sind(t){return Math.sin(t*Math.PI/180)}static cosd(t){return Math.cos(t*Math.PI/180)}static tand(t){return Math.tan(this.deg2Rad(t))}static asind(t){return this.rad2Deg(Math.asin(t))}static acosd(t){return this.rad2Deg(Math.acos(t))}static atand(t){return this.rad2Deg(Math.atan(t))}static atan2d(t,e){return this.rad2Deg(Math.atan2(t,e))}static cross(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}static dot(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}static norm(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])}static vecSum(t,e){return[t[0]+e[0],t[1]+e[1],t[2]+e[2]]}static linComb(t,e){const o=e[0].length;let a=new Array(o).fill(0);for(let s=0;s<t.length;s++){const r=e[s];for(let e=0;e<o;e++)a[e]+=t[s]*r[e]}return a}static vecDiff(t,e){return[t[0]-e[0],t[1]-e[1],t[2]-e[2]]}static vecMul(t,e){return[t[0]*e,t[1]*e,t[2]*e]}}},482:(t,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Nutation=void 0;const a=o(923),s=[[0,0,0,0,1,-6798.4,-171996,-174.2,92025,8.9],[0,0,2,-2,2,182.6,-13187,-1.6,5736,-3.1],[0,0,2,0,2,13.7,-2274,-.2,977,-.5],[0,0,0,0,2,-3399.2,2062,.2,-895,.5],[0,-1,0,0,0,-365.3,-1426,3.4,54,-.1],[1,0,0,0,0,27.6,712,.1,-7,0],[0,1,2,-2,2,121.7,-517,1.2,224,-.6],[0,0,2,0,1,13.6,-386,-.4,200,0],[1,0,2,0,2,9.1,-301,0,129,-.1],[0,-1,2,-2,2,365.2,217,-.5,-95,.3],[-1,0,0,2,0,31.8,158,0,-1,0],[0,0,2,-2,1,177.8,129,.1,-70,0],[-1,0,2,0,2,27.1,123,0,-53,0],[1,0,0,0,1,27.7,63,.1,-33,0],[0,0,0,2,0,14.8,63,0,-2,0],[-1,0,2,2,2,9.6,-59,0,26,0],[-1,0,0,0,1,-27.4,-58,-.1,32,0],[1,0,2,0,1,9.1,-51,0,27,0],[-2,0,0,2,0,-205.9,-48,0,1,0],[-2,0,2,0,1,1305.5,46,0,-24,0],[0,0,2,2,2,7.1,-38,0,16,0],[2,0,2,0,2,6.9,-31,0,13,0],[2,0,0,0,0,13.8,29,0,-1,0],[1,0,2,-2,2,23.9,29,0,-12,0],[0,0,2,0,0,13.6,26,0,-1,0],[0,0,2,-2,0,173.3,-22,0,0,0],[-1,0,2,0,1,27,21,0,-10,0],[0,2,0,0,0,182.6,17,-.1,0,0],[0,2,2,-2,2,91.3,-16,.1,7,0],[-1,0,0,2,1,32,16,0,-8,0],[0,1,0,0,1,386,-15,0,9,0],[1,0,0,-2,1,-31.7,-13,0,7,0],[0,-1,0,0,1,-346.6,-12,0,6,0],[2,0,-2,0,0,-1095.2,11,0,0,0],[-1,0,2,2,1,9.5,-10,0,5,0],[1,0,2,2,2,5.6,-8,0,3,0],[0,-1,2,0,2,14.2,-7,0,3,0],[0,0,2,2,1,7.1,-7,0,3,0],[1,1,0,-2,0,-34.8,-7,0,0,0],[0,1,2,0,2,13.2,7,0,-3,0],[-2,0,0,2,1,-199.8,-6,0,3,0],[0,0,0,2,1,14.8,-6,0,3,0],[2,0,2,-2,2,12.8,6,0,-3,0],[1,0,0,2,0,9.6,6,0,0,0],[1,0,2,-2,1,23.9,6,0,-3,0],[0,0,0,-2,1,-14.7,-5,0,3,0],[0,-1,2,-2,1,346.6,-5,0,3,0],[2,0,2,0,1,6.9,-5,0,3,0],[1,-1,0,0,0,29.8,5,0,0,0],[1,0,0,-1,0,411.8,-4,0,0,0],[0,0,0,1,0,29.5,-4,0,0,0],[0,1,0,-2,0,-15.4,-4,0,0,0],[1,0,-2,0,0,-26.9,4,0,0,0],[2,0,0,-2,1,212.3,4,0,-2,0],[0,1,2,-2,1,119.6,4,0,-2,0],[1,1,0,0,0,25.6,-3,0,0,0],[1,-1,0,-1,0,-3232.9,-3,0,0,0],[-1,-1,2,2,2,9.8,-3,0,1,0],[0,-1,2,2,2,7.2,-3,0,1,0],[1,-1,2,0,2,9.4,-3,0,1,0],[3,0,2,0,2,5.5,-3,0,1,0],[-2,0,2,0,2,1615.7,-3,0,1,0],[1,0,2,0,0,9.1,3,0,0,0],[-1,0,2,4,2,5.8,-2,0,1,0],[1,0,0,0,2,27.8,-2,0,1,0],[-1,0,2,-2,1,-32.6,-2,0,1,0],[0,-2,2,-2,1,6786.3,-2,0,1,0],[-2,0,0,0,1,-13.7,-2,0,1,0],[2,0,0,0,1,13.8,2,0,-1,0],[3,0,0,0,0,9.2,2,0,0,0],[1,1,2,0,2,8.9,2,0,-1,0],[0,0,2,1,2,9.3,2,0,-1,0],[1,0,0,2,1,9.6,-1,0,0,0],[1,0,2,2,1,5.6,-1,0,1,0],[1,1,0,-2,1,-34.7,-1,0,0,0],[0,1,0,2,0,14.2,-1,0,0,0],[0,1,2,-2,0,117.5,-1,0,0,0],[0,1,-2,2,0,-329.8,-1,0,0,0],[1,0,-2,2,0,23.8,-1,0,0,0],[1,0,-2,-2,0,-9.5,-1,0,0,0],[1,0,2,-2,0,32.8,-1,0,0,0],[1,0,0,-4,0,-10.1,-1,0,0,0],[2,0,0,-4,0,-15.9,-1,0,0,0],[0,0,2,4,2,4.8,-1,0,0,0],[0,0,2,-1,2,25.4,-1,0,0,0],[-2,0,2,4,2,7.3,-1,0,1,0],[2,0,2,2,2,4.7,-1,0,0,0],[0,-1,2,0,1,14.2,-1,0,0,0],[0,0,-2,0,1,-13.6,-1,0,0,0],[0,0,4,-2,2,12.7,1,0,0,0],[0,1,0,0,2,409.2,1,0,0,0],[1,1,2,-2,2,22.5,1,0,-1,0],[3,0,2,-2,2,8.7,1,0,0,0],[-2,0,2,2,2,14.6,1,0,-1,0],[-1,0,0,0,2,-27.3,1,0,-1,0],[0,0,-2,2,1,-169,1,0,0,0],[0,1,2,0,1,13.1,1,0,0,0],[-1,0,4,0,2,9.1,1,0,0,0],[2,1,0,-2,0,131.7,1,0,0,0],[2,0,0,2,0,7.1,1,0,0,0],[2,0,2,-2,1,12.8,1,0,-1,0],[2,0,-2,0,1,-943.2,1,0,0,0],[1,-1,0,-2,0,-29.3,1,0,0,0],[-1,0,0,1,1,-388.3,1,0,0,0],[-1,-1,0,2,1,35,1,0,0,0],[0,1,0,1,0,27.3,1,0,0,0]];e.Nutation=class{static nutationTerms(t){const e=t*t,o=e*t,r=23.4392911111-.0130041667*t-1.6388888889e-7*e+5.0361111111e-7*o,n=134.9629813889+198.8673980555*t+.0086972222222*e+17777777778e-15*o+477e3*t%360,i=357.5277233333+359.05034*t-.00016027777778*e-33333333333e-16*o+35640*t%360,c=93.2719102778+82.0175380556*t-.0036825*e+30555555555e-16*o+483120*t%360,h=297.8503630555+307.11148*t-.0019141666667*e+52777777778e-16*o+444960*t%360,l=125.0445222222-134.1362608333*t+.0020708333333*e+22222222222e-16*o-1800*t%360,M=1/36e6,u=s.length;let d=0,p=0;for(let e=0;e<u;e++){const o=s[e],r=o[0]*n+o[1]*i+o[2]*c+o[3]*h+o[4]*l;d+=M*(o[6]+o[7]*t)*a.MathUtils.sind(r),p+=M*(o[8]+o[9]*t)*a.MathUtils.cosd(r)}return{eps:r,deps:p%360,dpsi:d%360}}}},954:(t,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PointMass=void 0;const a=o(923),s=o(913);e.PointMass=class{static barycenter(t,e){const o=t.length,r=s.constants.c2,n=[];let i=0;for(let s=0;s<o;s++){const c=t[s];if(e){let e=Math.pow(a.MathUtils.norm(c.v),2);for(let r=0;r<o;r++){if(r==s)continue;const o=t[r];e-=o.mu/a.MathUtils.norm(a.MathUtils.vecDiff(c.r,o.r))}e=1-.5*e/r,n.push(c.mu*e)}else n.push(c.mu);i+=n[n.length-1]}let c=[0,0,0],h=[0,0,0];for(let e=0;e<o;e++){const o=t[e];c=a.MathUtils.linComb([1,n[e]],[c,o.r]),h=a.MathUtils.linComb([1,n[e]],[h,o.v])}return c=a.MathUtils.vecMul(c,1/i),h=a.MathUtils.vecMul(h,1/i),{r:c,v:h}}static accPointMass(t,e){const o=t.length,r=s.constants.c2,n=[],i=[];for(let e=0;e<o;e++){const s=t[e],r=[],c=[];for(let e=0;e<o;e++){const o=t[e],n=a.MathUtils.norm(a.MathUtils.vecDiff(s.r,o.r));r.push(n),c.push(Math.pow(n,3))}n.push(r),i.push(c)}const c=[],h=[],l=[];for(let e=0;e<o;e++){const s=t[e];let r=[0,0,0];for(let n=0;n<o;n++){if(n==e)continue;const o=t[n],c=a.MathUtils.vecDiff(o.r,s.r),h=a.MathUtils.vecMul(c,o.mu/i[n][e]);r=a.MathUtils.vecSum(r,h)}c.push(r)}if(!e)return c;for(let s=0;s<o;s++){const l=t[s];let M=[0,0,0];if(e){for(let e=0;e<o;e++){if(e==s)continue;const h=t[e],u=a.MathUtils.vecDiff(h.r,l.r),d=a.MathUtils.vecDiff(h.v,l.v),p=a.MathUtils.vecMul(u,h.mu/i[e][s]);let m=0;for(let a=0;a<o;a++){const o=t[a];s!=a&&(m-=4*o.mu/n[s][a]),e!=a&&(m-=o.mu/n[e][a])}const v=n[e][s],g=i[e][s];m+=Math.pow(a.MathUtils.norm(l.v),2)+2*Math.pow(a.MathUtils.norm(h.v),2)-4*a.MathUtils.dot(l.v,h.v)-1.5*Math.pow(a.MathUtils.dot(u,h.v)/v,2)+.5*a.MathUtils.dot(u,c[e]),M=a.MathUtils.linComb([1,m/r,h.mu/r/g*a.MathUtils.dot(u,a.MathUtils.linComb([4,-3],[l.v,h.v])),3.5/r*h.mu/v],[M,p,d,c[e]])}h.push(M)}}for(let t=0;t<o;t++)l.push(a.MathUtils.vecSum(c[t],h[t]));return l}}},423:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Polynomials=void 0,e.Polynomials=class{static legendreAssoc(t,e,o){switch(t){case 1:switch(e){case 0:return o;case 1:return-Math.sqrt(1-Math.pow(o,2))}case 2:switch(e){case 0:return.5*(3*Math.pow(o,2)-1);case 1:return-3*o*Math.sqrt(1-Math.pow(o,2));case 2:return 3*(1-Math.pow(o,2))}case 3:switch(e){case 0:return.5*(5*Math.pow(o,3)-3*o);case 1:return 1.5*(1-5*Math.pow(o,2))*Math.sqrt(1-Math.pow(o,2));case 2:return 15*o*(1-Math.pow(o,2));case 3:return-15*Math.pow(1-Math.pow(o,2),1.5)}case 4:switch(e){case 0:return.125*(35*Math.pow(o,4)-30*Math.pow(o,2)+3);case 1:return-2.5*(7*Math.pow(o,3)-3*o)*Math.sqrt(1-Math.pow(o,2));case 2:return 7.5*(7*Math.pow(o,2)-1)*(1-Math.pow(o,2));case 3:return-105*o*Math.pow(1-Math.pow(o,2),1.5);case 4:return 105*Math.pow(1-Math.pow(o,2),2)}}return 0}static legendreAssocd(t,e,o){switch(t){case 1:switch(e){case 0:return 1;case 1:return o/Math.sqrt(1-Math.pow(o,2))}case 2:switch(e){case 0:return 3*o;case 1:return-3*Math.sqrt(1-Math.pow(o,2))+3*Math.pow(o,2)/Math.sqrt(1-Math.pow(o,2));case 2:return-6*o}case 3:switch(e){case 0:return 7.5*Math.pow(o,2)-1.5;case 1:return(7.5*Math.pow(o,2)-1.5)*o/Math.sqrt(1-Math.pow(o,2))-15*o*Math.sqrt(1-Math.pow(o,2));case 2:return 15-45*Math.pow(o,2);case 3:return 45*o*Math.sqrt(1-Math.pow(o,2))}case 4:switch(e){case 0:return 17.5*Math.pow(o,3)-7.5*o;case 1:return(17.5*Math.pow(o,4)-7.5*Math.pow(o,2))/Math.sqrt(1-Math.pow(o,2))-(52.5*o*o-7.5)*Math.sqrt(1-o*o);case 2:return 120*o-210*Math.pow(o,3);case 3:return-105*Math.pow(1-Math.pow(o,2),1.5)+315*Math.pow(o,2)*Math.sqrt(1-Math.pow(o,2));case 4:return-420*(o-Math.pow(o,3))}}return 0}static legendreDeriv(t,e){switch(t){case 0:return 0;case 1:return 1;case 2:return 3*e;case 3:return 7.5*Math.pow(e,2)-1.5;case 4:return 17.5*Math.pow(e,3)-7.5*e;case 5:return 39.375*Math.pow(e,4)-26.25*Math.pow(e,2)+1.875;case 6:return 86.625*Math.pow(e,5)-78.75*Math.pow(e,3)+13.125*e}return 0}static legendreValue(t,e){switch(t){case 0:return 1;case 1:return e;case 2:return.5*(3*Math.pow(e,2)-1);case 3:return.5*(5*Math.pow(e,3)-3*e);case 4:return.125*(35*Math.pow(e,4)-30*Math.pow(e,2)+3);case 5:return.125*(63*Math.pow(e,5)-70*Math.pow(e,3)+15*e);case 6:return.0625*(231*Math.pow(e,6)-315*Math.pow(e,4)+105*Math.pow(e,2)-5)}return 0}}},551:(t,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Rotations=void 0;const a=o(923);e.Rotations=class{static rotateCart1d(t,e){const o=a.MathUtils.cosd(e),s=a.MathUtils.sind(e);return[t[0],o*t[1]+s*t[2],-s*t[1]+o*t[2]]}static rotateCart2d(t,e){const o=a.MathUtils.cosd(e),s=a.MathUtils.sind(e);return[o*t[0]-s*t[2],t[1],s*t[0]+o*t[2]]}static rotateCart3d(t,e){const o=a.MathUtils.cosd(e),s=a.MathUtils.sind(e);return[o*t[0]+s*t[1],-s*t[0]+o*t[1],t[2]]}static rotateCart1(t,e){return[t[0],Math.cos(e)*t[1]+Math.sin(e)*t[2],-Math.sin(e)*t[1]+Math.cos(e)*t[2]]}static rotateCart2(t,e){return[Math.cos(e)*t[0]-Math.sin(e)*t[2],t[1],Math.sin(e)*t[0]+Math.cos(e)*t[2]]}static rotateCart3(t,e){return[Math.cos(e)*t[0]+Math.sin(e)*t[1],-Math.sin(e)*t[0]+Math.cos(e)*t[1],t[2]]}}},225:(t,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Tides=void 0;const a=o(923),s=o(913);e.Tides=class{static accTides(t,e,o){const r=a.MathUtils.norm(t),n=a.MathUtils.vecMul([t[0]+s.constants.phase*t[1],t[1]-s.constants.phase*t[0],t[2]],-3*s.constants.love*o*(1+o/e)*(Math.pow(s.constants.aEarth,5)/Math.pow(r,8)));return{accMeTodTides:n,accEmTodTides:a.MathUtils.vecMul(n,-o/e)}}}}},e={};function o(a){var s=e[a];if(void 0!==s)return s.exports;var r=e[a]={exports:{}};return t[a](r,r.exports,o),r.exports}var a={};(()=>{var t=a;Object.defineProperty(t,"__esModule",{value:!0}),t.constants=t.stateInitial=t.Nutation=t.Figure=t.Tides=t.Integration=t.PointMass=t.Libration=t.Polynomials=t.Rotations=t.MathUtils=void 0;const e=o(923);Object.defineProperty(t,"MathUtils",{enumerable:!0,get:function(){return e.MathUtils}});const s=o(551);Object.defineProperty(t,"Rotations",{enumerable:!0,get:function(){return s.Rotations}});const r=o(423);Object.defineProperty(t,"Polynomials",{enumerable:!0,get:function(){return r.Polynomials}});const n=o(496);Object.defineProperty(t,"Libration",{enumerable:!0,get:function(){return n.Libration}});const i=o(342);Object.defineProperty(t,"Integration",{enumerable:!0,get:function(){return i.Integration}});const c=o(225);Object.defineProperty(t,"Tides",{enumerable:!0,get:function(){return c.Tides}});const h=o(954);Object.defineProperty(t,"PointMass",{enumerable:!0,get:function(){return h.PointMass}});const l=o(646);Object.defineProperty(t,"Figure",{enumerable:!0,get:function(){return l.Figure}});const M=o(913);Object.defineProperty(t,"stateInitial",{enumerable:!0,get:function(){return M.stateInitial}}),Object.defineProperty(t,"constants",{enumerable:!0,get:function(){return M.constants}});const u=o(482);Object.defineProperty(t,"Nutation",{enumerable:!0,get:function(){return u.Nutation}})})(),SSIE=a})();